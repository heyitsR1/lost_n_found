{% extends 'base.html' %}
{% load static %}

{% block title %}Home - King's Lost N Found{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-gradient-to-r from-secondary to-blue-400 min-h-[60vh] flex items-center relative overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <video src="{% static 'media/video.mp4' %}" autoplay muted loop class="absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-30"></video>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
            <div class="animate-fade-in">
                <div class="text-white">
                    <h1 class="text-4xl md:text-5xl font-bold mb-6">
                        <i class="fas fa-search-location mr-3 animate-pulse"></i>
                        Lost N Found
                    </h1>
                    <p class="text-xl mb-6">
                        I have... lost something or found something. Let's help each other find what's missing.
                    </p>
                    <div class="flex flex-wrap gap-4">
                        {% if user.is_authenticated %}
                            <a href="{% url 'core:item_create' %}" class="px-6 py-3 bg-white text-primary font-medium rounded-md shadow-md hover:bg-gray-100 transition duration-300">
                                <i class="fas fa-plus mr-2"></i>Post Item
                            </a>
                        {% else %}
                            <a href="{% url 'account_signup' %}" class="px-6 py-3 bg-white text-primary font-medium rounded-md shadow-md hover:bg-gray-100 transition duration-300">
                                <i class="fas fa-user-plus mr-2"></i>Register
                            </a>
                            <a href="{% url 'account_login' %}" class="px-6 py-3 bg-transparent border border-white text-white font-medium rounded-md hover:bg-white hover:bg-opacity-10 transition duration-300">
                                <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="text-center animate-fade-in hidden lg:block">
                <div class="relative">
                    <div class="bg-white rounded-full inline-block p-8 shadow-xl transform hover:-translate-y-2 transition duration-300">
                        <i class="fas fa-search-location text-primary animate-pulse" style="font-size: 4rem;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Action Cards Section -->
<section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-center">
            <div class="w-full lg:w-2/3">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Lost Card -->
                    <div class="animate-fade-in">
                        <div class="bg-red-600 text-white p-6 h-full rounded-lg shadow-lg transform hover:-translate-y-2 transition duration-300">
                            <div class="flex items-center mb-4">
                                <div class="bg-white bg-opacity-25 rounded-full p-3 mr-3">
                                    <i class="fas fa-exclamation-triangle text-2xl animate-pulse"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-xl mb-0">Lost</h3>
                                    <p class="mb-0 opacity-75">Something missing?</p>
                                </div>
                            </div>
                            <p class="mb-6">Report your lost item and let our community help you find it.</p>
                            <a href="{% url 'core:item_create' %}?type=lost" class="inline-block px-4 py-2 bg-white text-red-600 font-medium rounded-md hover:bg-gray-100 transition duration-300">
                                <i class="fas fa-plus mr-2"></i>Report Lost Item
                            </a>
                        </div>
                    </div>
                    
                    <!-- Found Card -->
                    <div class="animate-fade-in">
                        <div class="bg-green-600 text-white p-6 h-full rounded-lg shadow-lg transform hover:-translate-y-2 transition duration-300">
                            <div class="flex items-center mb-4">
                                <div class="bg-white bg-opacity-25 rounded-full p-3 mr-3">
                                    <i class="fas fa-hand-holding-heart text-2xl animate-pulse"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-xl mb-0">Found</h3>
                                    <p class="mb-0 opacity-75">Found something?</p>
                                </div>
                            </div>
                            <p class="mb-6">Help return found items to their rightful owners.</p>
                            <a href="{% url 'core:item_create' %}?type=found" class="inline-block px-4 py-2 bg-white text-green-600 font-medium rounded-md hover:bg-gray-100 transition duration-300">
                                <i class="fas fa-plus mr-2"></i>Report Found Item
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Statistics Section -->
<section class="py-12 bg-gray-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
            <div class="mb-4 animate-fade-in">
                <div class="bg-white p-6 rounded-lg shadow-md transform hover:-translate-y-2 transition duration-300">
                    <div class="text-4xl font-bold text-primary mb-2">{{ total_items }}</div>
                    <div class="text-gray-600 font-medium">Total Items</div>
                </div>
            </div>
            <div class="mb-4 animate-fade-in">
                <div class="bg-white p-6 rounded-lg shadow-md transform hover:-translate-y-2 transition duration-300">
                    <div class="text-4xl font-bold text-red-600 mb-2">{{ lost_items }}</div>
                    <div class="text-gray-600 font-medium">Lost Items</div>
                </div>
            </div>
            <div class="mb-4 animate-fade-in">
                <div class="bg-white p-6 rounded-lg shadow-md transform hover:-translate-y-2 transition duration-300">
                    <div class="text-4xl font-bold text-green-600 mb-2">{{ found_items }}</div>
                    <div class="text-gray-600 font-medium">Found Items</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Recent Items Section -->
<section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="mb-8 animate-fade-in">
                <h3 class="font-bold text-2xl mb-6">
                    <i class="fas fa-exclamation-triangle text-red-600 mr-2 animate-pulse"></i>
                    Recent Lost Items
                </h3>
                {% if recent_lost %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {% for item in recent_lost %}
                            <div>
                                <div class="bg-white rounded-lg shadow-md h-full transform hover:-translate-y-1 hover:shadow-lg transition duration-300">
                                    {% if item.images.first %}
                                        <img src="{{ item.images.first.image.url }}" class="w-full h-40 object-cover rounded-t-lg" alt="{{ item.title }}">
                                    {% else %}
                                        <div class="w-full h-40 bg-gray-100 flex items-center justify-center rounded-t-lg">
                                            <i class="fas fa-image text-gray-400 text-2xl"></i>
                                        </div>
                                    {% endif %}
                                    <div class="p-4">
                                        <h6 class="font-medium text-lg mb-2">{{ item.title }}</h6>
                                        <p class="text-sm text-gray-500 mb-2">{{ item.location }}</p>
                                        <p class="text-sm text-gray-500 mb-4">{{ item.created_at|timesince }} ago</p>
                                    </div>
                                    <div class="px-4 py-3 border-t border-gray-100">
                                        <a href="{% url 'core:item_detail' item.pk %}" class="inline-block px-4 py-2 border border-primary text-primary text-sm font-medium rounded hover:bg-primary hover:text-white transition duration-300">
                                            View Details
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-center py-8 bg-white rounded-lg shadow-sm">
                        <i class="fas fa-inbox text-gray-400 text-3xl mb-4"></i>
                        <p class="text-gray-500">No lost items reported yet.</p>
                    </div>
                {% endif %}
            </div>
            
            <div class="mb-8 animate-fade-in">
                <h3 class="font-bold text-2xl mb-6">
                    <i class="fas fa-hand-holding-heart text-green-600 mr-2 animate-pulse"></i>
                    Recent Found Items
                </h3>
                {% if recent_found %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {% for item in recent_found %}
                            <div>
                                <div class="bg-white rounded-lg shadow-md h-full transform hover:-translate-y-1 hover:shadow-lg transition duration-300">
                                    {% if item.images.first %}
                                        <img src="{{ item.images.first.image.url }}" class="w-full h-40 object-cover rounded-t-lg" alt="{{ item.title }}">
                                    {% else %}
                                        <div class="w-full h-40 bg-gray-100 flex items-center justify-center rounded-t-lg">
                                            <i class="fas fa-image text-gray-400 text-2xl"></i>
                                        </div>
                                    {% endif %}
                                    <div class="p-4">
                                        <h6 class="font-medium text-lg mb-2">{{ item.title }}</h6>
                                        <p class="text-sm text-gray-500 mb-2">{{ item.location }}</p>
                                        <p class="text-sm text-gray-500 mb-4">{{ item.created_at|timesince }} ago</p>
                                    </div>
                                    <div class="px-4 py-3 border-t border-gray-100">
                                        <a href="{% url 'core:item_detail' item.pk %}" class="inline-block px-4 py-2 border border-green-600 text-green-600 text-sm font-medium rounded hover:bg-green-600 hover:text-white transition duration-300">
                                            View Details
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-center py-8 bg-white rounded-lg shadow-sm">
                        <i class="fas fa-inbox text-gray-400 text-3xl mb-4"></i>
                        <p class="text-gray-500">No found items reported yet.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Search Section -->
<section class="py-12 bg-gray-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-center">
            <div class="w-full lg:w-2/3 animate-fade-in">
                <div class="text-center mb-6">
                    <h3 class="font-bold text-2xl mb-2">Search for Items</h3>
                    <p class="text-gray-600">Find lost items or check if your found item has been reported</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md transform hover:-translate-y-1 transition duration-300">
                    <form method="get" action="{% url 'core:item_list' %}">
                        <div class="grid grid-cols-1 md:grid-cols-6 gap-4">
                            <div class="md:col-span-3">
                                <input type="text" name="search" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Search items...">
                            </div>
                            <div class="md:col-span-1">
                                <select name="type" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent appearance-none bg-white">
                                    <option value="">All Types</option>
                                    <option value="lost">Lost</option>
                                    <option value="found">Found</option>
                                </select>
                            </div>
                            <div class="md:col-span-2">
                                <button type="submit" class="w-full px-4 py-2 bg-primary text-white font-medium rounded-md hover:bg-opacity-90 transition duration-300">
                                    <i class="fas fa-search mr-2"></i>Search
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
{% if categories %}
<section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-8 animate-fade-in">
            <h3 class="font-bold text-2xl mb-2">Browse by Category</h3>
            <p class="text-gray-600">Find items by category</p>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            {% for category in categories %}
                <div class="animate-fade-in">
                    <a href="{% url 'core:item_list' %}?category={{ category.id }}" class="no-underline">
                        <div class="bg-white text-center p-6 rounded-lg shadow-md h-full transform hover:-translate-y-1 hover:shadow-lg transition duration-300">
                            <i class="fas fa-{{ category.icon|default:'tag' }} text-2xl mb-4 animate-pulse" style="color: {{ category.color }};"></i>
                            <h6 class="font-medium text-lg">{{ category.name }}</h6>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}
{% endblock %}